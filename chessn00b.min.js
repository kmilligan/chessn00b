var BoardFactory;
(function(){"function"!==typeof Object.create&&(Object.create=function(a){function b(){}b.prototype=a;return new b});var p={R:"\u2656",N:"\u2658",B:"\u2657",Q:"\u2655",K:"\u2654",P:"\u2659",r:"\u265c",n:"\u265e",b:"\u265d",q:"\u265b",k:"\u265a",p:"\u265f",isWhite:function(a){return 91>a.charCodeAt(0)?!0:!1}},n={1:"a",2:"b",3:"c",4:"d",5:"e",6:"f",7:"g",8:"h",a:"1",b:"2",c:"3",d:"4",e:"5",f:"6",g:"7",h:"8"},r={init:function(a,b){this.file=a;this.rank=b;this.color=0;this.name=n[a]+b;this.piece="";var d=
0==a%2,c=0==b%2;if(!d&&c||d&&!c)this.color=1;return this},setPiece:function(a){if("undefined"===p[a])throw Error("Invalid piece");this.piece=a},removePiece:function(){this.piece=""},hasPiece:function(){return""==this.piece?!1:!0},getPiece:function(){return this.piece},isWhite:function(){return 1==this.color?!0:!1}},q={init:function(){this.colorToMove=1;this.enpassantTarget=this.castlingOptions="-";this.fullMoveNumber=this.halfMoveClock=0;this.squares=[];for(var a=1;9>a;a++)for(var b=1;9>b;b++)1==
b&&(this.squares[a]=[]),this.squares[a][b]=Object.create(r).init(a,b);return this},isWhiteToMove:function(){return 1==this.colorToMove?!0:!1},setFEN:function(a){a=a.split(" ");for(var b=a[0].split("/"),d=8;0<d;d--)this.setRankFEN(d,b[8-d]);this.colorToMove="w"==a[1]?1:0;a[2]&&(this.castlingOptions=a[2]);a[3]&&(this.enpassantTarget=a[3]);"undefined"!=typeof a[4]&&(this.halfMoveClock=parseInt(a[4],10));"undefined"!=typeof a[5]&&(this.fullMoveNumber=parseInt(a[5],10))},setRankFEN:function(a,b){var d=
b.split(""),c=1,e;for(e in d){if(8<c||" "==d[e])break;if(p[d[e]])this.setPiece(d[e],c,a),c++;else for(;0<d[e];)this.removePiece(c,a),d[e]--,c++}},setPiece:function(a,b,d){this.squares[b][d].setPiece(a)},removePiece:function(a,b){this.squares[a][b].removePiece()},getPiece:function(a,b){return this.squares[a][b].getPiece()},getSquare:function(a,b){"undefined"==typeof b&&"string"==typeof a&&(b=a.substr(1,1),a=n[a.substr(0,1)]);return this.squares[a][b]},dump:function(){console.log("-----------------");
for(var a=8;0<a;a--){for(var b="|",d=1;9>d;d++)b=this.squares[d][a].hasPiece()?b+this.squares[d][a].getPiece():b+" ",b+="|";console.log(b);console.log("-----------------")}}};BoardFactory=function(){return{create:function(){return Object.create(q).init()},getPieceMap:function(){return p},getFileMap:function(){return n}}}()})();
(function(p){p.fn.chessn00b=function(b){b||(b={});if("string"==typeof b&&1==this.length&&this[0].displayboard)switch(b){case "fen":return this[0].displayboard.getFEN();default:return"unsupported option"}return this.each(function(){if(!this.displayboard){var d="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";b.fen&&(d=b.fen);b.element=p(this);this.displayboard=Object.create(a).init(b);this.displayboard.setFEN(d)}})};var n=BoardFactory.getPieceMap(),r={"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR":["e7e5"],
"rnbqkbnr/pppppppp/8/8/3P4/8/PPP1PPPP/RNBQKBNR":["g8f6"],"rnbqkbnr/pppppppp/8/8/2P5/8/PP1PPPPP/RNBQKBNR":["g8f6"],"rnbqkbnr/pppp1ppp/8/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R":["b8c6"],"rnbqkb1r/pppppppp/5n2/8/2PP4/8/PP2PPPP/RNBQKBNR":["g7g6"]},q={init:function(b){this.square=b;this.element=p('<div class="chessn00b-square">&nbsp;</div>');this.element[0].displaySquare=this;this.element.attr("rel",this.square.name);this.element.addClass(this.square.color?"chessn00b-light-square":"chessn00b-dark-square");return this},
update:function(){this.square.hasPiece()?this.element.html(n[this.square.getPiece()]):this.element.html("&nbsp;")},lite:function(){this.element.addClass("chessn00b-square-lit")},unlite:function(){this.element.removeClass("chessn00b-square-lit")},toggleLite:function(){this.element.hasClass("chessn00b-square-lit")?this.unlite():this.lite()}},a={init:function(b){if(!b||!b.element)throw Error('Missing options; requires at least "element" to attach to.');"undefined"===typeof b.playGame&&(b.playGame=!0);
this.element=b.element;this.board=BoardFactory.create();this.engine=EngineFactory.create(this.board);this.playGame=b.playGame;this.lastClickedSquare=null;this.displaySquares=[];this.thinking=!1;this.id="board"+Math.floor(1E6*Math.random());this.element.addClass(this.id);for(b=1;9>b;b++)for(var a=1;9>a;a++)1==a&&(this.displaySquares[b]=[]),this.displaySquares[b][a]=Object.create(q).init(this.board.squares[b][a]);this.createDisplay();return this},createDisplay:function(){for(var b=8;0<b;b--){for(var a=
p('<div class="chessn00b-rank" rel="'+b+'"></div>'),c=1;9>c;c++)a.append(this.displaySquares[c][b].element);this.element.append(a)}this.element.append('<div class="chessn00b-status"><span class="illegal-move">Illegal move. </span><span class="your-move">Your move</span><span class="game-over">Game Over. </span><span class="you-win">You win!</span><span class="you-lose">You win!</span><span class="thinking">Thinking...</span></div>');this.element.find(".illegal-move").hide();this.element.find(".thinking").hide();
this.element.find(".game-over").hide();this.element.find(".you-lose").hide();this.element.find(".you-win").hide();this.playGame||this.element.find(".your-move").hide();this.autosetHeight();var e=this;this.element.on("click",".chessn00b-square",function(){e.squareClicked(p(this));return!1})},autosetHeight:function(){var b=this.displaySquares[1][1].element.width();"undefined"==typeof this.dynCSS&&(this.dynCSS=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(this.dynCSS));
b="."+this.id+" .chessn00b-square { font-size: "+Math.ceil(.82*b)+"px;  height: "+b+"px;  line-height: "+b+"px; }";this.dynCSS.styleSheet?this.dynCSS.styleSheet.cssText=b:this.dynCSS.innerHTML=b},squareClicked:function(b){this.thinking||(this.element.find(".illegal-move").hide(),this.lastClickedSquare?b[0]==this.lastClickedSquare?(this.lastClickedSquare.displaySquare.unlite(),this.lastClickedSquare=null):(this.lastClickedSquare.displaySquare.unlite(),b=""+this.lastClickedSquare.displaySquare.square.name+
b[0].displaySquare.square.name,this.engine.isValidMove(b)?(this.engine.move(b),this.update(),this.lastClickedSquare=null,this.playGame&&this.autoMove()):(this.element.find(".illegal-move").show(),this.lastClickedSquare=null)):(b[0].displaySquare.lite(),this.lastClickedSquare=b[0]))},autoMove:function(){this.thinking=!0;this.element.find(".your-move").hide();this.element.find(".thinking").show();var b=this;setTimeout(function(){var a;if(b.engine.blackInCheckmate())b.thinking=!1,b.element.find(".thinking").hide(),
b.element.find(".game-over").show(),b.element.find(".you-win").show();else{if(a=r[b.getFEN()]){var c=Math.round(Math.random()*(a.length-1));a=a[c];console.log("book move used")}else a=b.engine.getBestMoveForBlack();b.engine.move(a);b.thinking=!1;b.element.find(".thinking").hide();b.update();b.engine.whiteInCheckmate()?(b.element.find(".game-over").show(),b.element.find(".you-lose").show()):b.element.find(".your-move").show()}},0)},setFEN:function(a){this.board.setFEN(a);this.update()},getFEN:function(){return this.engine.getPositionFEN()},
update:function(){for(var a=1;9>a;a++)for(var d=1;9>d;d++)this.displaySquares[a][d].update()}}})(jQuery);if("undefined"===typeof BoardFactory)throw console&&console.log("Missing the BoardFactory!"),Error("Missing the BoardFactory!");var EngineFactory;
(function(){var p=BoardFactory.getPieceMap(),n={init:function(a){this.board=a;this.resetCaches();return this},resetCaches:function(){this.whiteCoveredSquares=[];this.blackCoveredSquares=[];this.blackDynamicValue=this.whiteDynamicValue=this.blackStaticValue=this.whiteStaticValue=0;this.cachedPositionFEN=null;this.validWhiteMoves=[];this.validBlackMoves=[]},getWhitesCoveredSquares:function(){this.determineCoveredSquares(!0);return this.whiteCoveredSquares},getBlacksCoveredSquares:function(){this.determineCoveredSquares(!1);
return this.blackCoveredSquares},getValidMovesForWhite:function(){this.determineValidMoves(!0);return this.validWhiteMoves},getValidMovesForBlack:function(){this.determineValidMoves(!1);return this.validBlackMoves},determineValidMoves:function(a){if(!(a&&0<this.validWhiteMoves.length||!a&&0<this.validBlackMoves.length)){a&&(this.validWhiteMoves=[]);a||(this.validBlackMoves=[]);for(var b,d,c,e,h=1;9>h;h++)for(var k=1;9>k;k++)if(this.board.squares[h][k].hasPiece()&&(b=this.board.squares[h][k].name,
c=p.isWhite(this.board.squares[h][k].getPiece()),c==a)){e=this.getValidMovesForSquare(h,k);for(var g=0;g<e.length;g++)d=""+b+e[g].name,c?this.validWhiteMoves.push(d):this.validBlackMoves.push(d)}}},getValidMovesForSquare:function(a,b){var d=[],c;c="object"==typeof a?a:this.board.squares[a][b];if(!c.hasPiece())return d;var e=c.getPiece(),h=p.isWhite(e),k="k"==e||"K"==e?!0:!1,e="p"==e||"P"==e?!0:!1,g=this.getPositionFEN(),f=EngineFactory.create(),l=this.getCoveredSquares(c);if(0==l.length)return d;
for(var m=0;m<l.length;m++)if(!(l[m].hasPiece()&&p.isWhite(l[m].getPiece())==h||e&&!l[m].hasPiece())){f.setFEN(g);var n=""+c.name+l[m].name;f.move(n,!0);h&&f.whiteInCheck()||!h&&f.blackInCheck()||d.push(l[m])}e&&(h?8>c.rank&&!this.board.squares[c.file][c.rank+1].hasPiece()&&(f.setFEN(g),n=""+c.name+this.board.squares[c.file][c.rank+1].name,f.move(n,!0),f.whiteInCheck()||d.push(this.board.squares[c.file][c.rank+1]),2!=c.rank||this.board.squares[c.file][c.rank+2].hasPiece()||(f.setFEN(g),n=""+c.name+
this.board.squares[c.file][c.rank+2].name,f.move(n,!0),f.whiteInCheck()||d.push(this.board.squares[c.file][c.rank+2]))):1<c.rank&&!this.board.squares[c.file][c.rank-1].hasPiece()&&(f.setFEN(g),n=""+c.name+this.board.squares[c.file][c.rank-1].name,f.move(n,!0),f.blackInCheck()||d.push(this.board.squares[c.file][c.rank-1]),7!=c.rank||this.board.squares[c.file][c.rank-2].hasPiece()||(f.setFEN(g),n=""+c.name+this.board.squares[c.file][c.rank-2].name,f.move(n,!0),f.blackInCheck()||d.push(this.board.squares[c.file][c.rank-
2]))));k&&(h&&!this.whiteInCheck()?(!(0<=this.board.castlingOptions.indexOf("K"))||this.board.squares[c.file+1][c.rank].hasPiece()||this.isSquareAttackedByBlack(this.board.squares[c.file+1][c.rank])||this.board.squares[c.file+2][c.rank].hasPiece()||this.isSquareAttackedByBlack(this.board.squares[c.file+2][c.rank])||d.push(this.board.squares[c.file+2][c.rank]),!(0<=this.board.castlingOptions.indexOf("Q"))||this.board.squares[c.file-1][c.rank].hasPiece()||this.isSquareAttackedByBlack(this.board.squares[c.file-
1][c.rank])||this.board.squares[c.file-2][c.rank].hasPiece()||this.isSquareAttackedByBlack(this.board.squares[c.file-2][c.rank])||d.push(this.board.squares[c.file-2][c.rank])):h||this.blackInCheck()||(!(0<=this.board.castlingOptions.indexOf("k"))||this.board.squares[c.file+1][c.rank].hasPiece()||this.isSquareAttackedByWhite(this.board.squares[c.file+1][c.rank])||this.board.squares[c.file+2][c.rank].hasPiece()||this.isSquareAttackedByWhite(this.board.squares[c.file+2][c.rank])||d.push(this.board.squares[c.file+
2][c.rank]),!(0<=this.board.castlingOptions.indexOf("q"))||this.board.squares[c.file-1][c.rank].hasPiece()||this.isSquareAttackedByWhite(this.board.squares[c.file-1][c.rank])||this.board.squares[c.file-2][c.rank].hasPiece()||this.isSquareAttackedByWhite(this.board.squares[c.file-2][c.rank])||d.push(this.board.squares[c.file-2][c.rank])));return d},isValidMove:function(a,b){var d;"object"==typeof a?d=a:(d=this.board.getSquare(a.substr(0,2)),b=this.board.getSquare(a.substr(2,2)));d=this.getValidMovesForSquare(d);
for(var c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},determineCoveredSquares:function(a){if(!(a&&0<this.whiteCoveredSquares.length||!a&&0<this.blackCoveredSquares.legnth)){a&&(this.whiteCoveredSquares=[]);a||(this.blackCoveredSquares=[]);for(var b,d=1;9>d;d++)for(var c=1;9>c;c++)if(this.board.squares[d][c].hasPiece()){var e=p.isWhite(this.board.squares[d][c].getPiece());if(e==a){b=this.getCoveredSquares(d,c);var h=this.blackCoveredSquares;e&&(h=this.whiteCoveredSquares);for(e=0;e<b.length;e++)h.push(b[e])}}}},
getCoveredSquares:function(a,b){var d;"object"==typeof a?(d=a.file,b=a.rank):d=a;var c=[],e=[];switch(this.board.squares[d][b].getPiece()){case "K":case "k":c=this.getStraightOptions(d,b,1);e=this.getDiagonalOptions(d,b,1);break;case "Q":case "q":c=this.getStraightOptions(d,b,8);e=this.getDiagonalOptions(d,b,8);break;case "R":case "r":c=this.getStraightOptions(d,b,8);break;case "B":case "b":e=this.getDiagonalOptions(d,b,8);break;case "N":case "n":c=this.getKnightOptions(d,b);break;case "P":case "p":c=
this.getPawnOptions(d,b)}for(d=0;d<e.length;d++)c.push(e[d]);return c},getStraightOptions:function(a,b,d){for(var c=!1,e=!1,h=!1,k=!1,g=[],f=1;f<=d;f++)9>b+f&&!c&&(g.push(this.board.squares[a][b+f]),this.board.squares[a][b+f].hasPiece()&&(c=!0)),9>a+f&&!e&&(g.push(this.board.squares[a+f][b]),this.board.squares[a+f][b].hasPiece()&&(e=!0)),0<b-f&&!h&&(g.push(this.board.squares[a][b-f]),this.board.squares[a][b-f].hasPiece()&&(h=!0)),0<a-f&&!k&&(g.push(this.board.squares[a-f][b]),this.board.squares[a-
f][b].hasPiece()&&(k=!0));return g},getDiagonalOptions:function(a,b,d){for(var c=!1,e=!1,h=!1,k=!1,g,f,l=[],m=1;m<=d;m++)9>b+m&&(f=b+m,9>a+m&&!c&&(g=a+m,l.push(this.board.squares[g][f]),this.board.squares[g][f].hasPiece()&&(c=!0)),0<a-m&&!e&&(g=a-m,l.push(this.board.squares[g][f]),this.board.squares[g][f].hasPiece()&&(e=!0))),0<b-m&&(f=b-m,9>a+m&&!h&&(g=a+m,l.push(this.board.squares[g][f]),this.board.squares[g][f].hasPiece()&&(h=!0)),0<a-m&&!k&&(g=a-m,l.push(this.board.squares[g][f]),this.board.squares[g][f].hasPiece()&&
(k=!0)));return l},getKnightOptions:function(a,b){var d=[];0<a-1&&(9>b+2&&d.push(this.board.squares[a-1][b+2]),0<b-2&&d.push(this.board.squares[a-1][b-2]),0<a-2&&(9>b+1&&d.push(this.board.squares[a-2][b+1]),0<b-1&&d.push(this.board.squares[a-2][b-1])));9>a+1&&(9>b+2&&d.push(this.board.squares[a+1][b+2]),0<b-2&&d.push(this.board.squares[a+1][b-2]),9>a+2&&(9>b+1&&d.push(this.board.squares[a+2][b+1]),0<b-1&&d.push(this.board.squares[a+2][b-1])));return d},getPawnOptions:function(a,b){var d=[];p.isWhite(this.board.squares[a][b].getPiece())?
8>b&&(1<a&&d.push(this.board.squares[a-1][b+1]),8>a&&d.push(this.board.squares[a+1][b+1])):1<b&&(1<a&&d.push(this.board.squares[a-1][b-1]),8>a&&d.push(this.board.squares[a+1][b-1]));return d},findPiece:function(a){for(var b=[],d=1;9>d;d++)for(var c=1;9>c;c++)this.board.squares[d][c].hasPiece()&&this.board.squares[d][c].getPiece()==a&&b.push(this.board.squares[d][c]);return b},isSquareAttacked:function(a){if(!a.hasPiece())return!1;var b;b=p.isWhite(a.getPiece())?this.getBlacksCoveredSquares():this.getWhitesCoveredSquares();
for(var d=0;d<b.length;d++)if(b[d]===a)return!0;return!1},isSquareAttackedByWhite:function(a,b){var d;d="object"==typeof a?a:this.board.squares[a][b];for(var c=this.getWhitesCoveredSquares(),e=0;e<c.length;e++)if(c[e]===d)return!0;return!1},isSquareAttackedByBlack:function(a,b){var d;d="object"==typeof a?a:this.board.squares[a][b];for(var c=this.getBlacksCoveredSquares(),e=0;e<c.length;e++)if(c[e]===d)return!0;return!1},getPositionFEN:function(){if(this.cachedPositionFEN)return this.cachedPositionFEN;
for(var a=[],b=8;0<b;b--){for(var d="",c=0,e=1;9>e;e++)this.board.squares[e][b].hasPiece()?(0<c&&(d+=c,c=0),d+=this.board.squares[e][b].getPiece()):c++;0<c&&(d+=c);a.push(d)}return this.cachedPositionFEN=a.join("/")},setFEN:function(a){this.resetCaches();this.board.setFEN(a)},blackInCheck:function(){var a=this.findPiece("k");return 0==a.length?!1:this.isSquareAttacked(a[0])},whiteInCheck:function(){var a=this.findPiece("K");return 0==a.length?!1:this.isSquareAttacked(a[0])},blackInCheckmate:function(){var a=
this.findPiece("k");return 0==a.length?!1:this.isSquareAttacked(a[0])&&0==this.getValidMovesForSquare(a[0]).length},whiteInCheckmate:function(){var a=this.findPiece("K");return 0==a.length?!1:this.isSquareAttacked(a[0])&&0==this.getValidMovesForSquare(a[0]).length},moves:function(a){"string"==typeof a&&(a=a.split(" "));for(var b=0;b<a.length;b++)if(!this.move(a[b]))return!1;return!0},move:function(a,b){b=!0===b?!0:!1;var d=a.substr(0,2),c=a.substr(2,2);4<a.length&&a.substr(4,1);d=this.board.getSquare(d);
if(!d||!d.hasPiece())return!1;c=this.board.getSquare(c);if(!b&&!this.isValidMove(d,c))return!1;var e=d.getPiece();d.removePiece();c.setPiece(e);"k"!=e&&"K"!=e||2!=Math.abs(d.file-c.file)||(c.file>d.file?(d=this.board.squares[c.file+1][c.rank],c=this.board.squares[c.file-1][c.rank]):(d=this.board.squares[c.file-2][c.rank],c=this.board.squares[c.file+1][c.rank]),e=d.getPiece(),d.removePiece(),c.setPiece(e));this.resetCaches();return!0},getWhiteStaticValue:function(){this.determineStaticValues();return this.whiteStaticValue},
getBlackStaticValue:function(){this.determineStaticValues();return this.blackStaticValue},determineStaticValues:function(){if(!(0<this.whiteStaticValue||0<this.blackStaticValue)){this.blackStaticValue=this.whiteStaticValue=0;for(var a,b=1;9>b;b++)for(var d=1;9>d;d++)if(this.board.squares[b][d].hasPiece()){switch(this.board.squares[b][d].getPiece()){case "Q":case "q":a=9;break;case "R":case "r":a=5;break;case "B":case "b":a=3;break;case "N":case "n":a=3;break;case "P":case "p":a=1;break;default:continue}a*=
10;p.isWhite(this.board.squares[b][d].getPiece())?this.whiteStaticValue+=a:this.blackStaticValue+=a}}},getWhiteDynamicValue:function(){this.determineDynamicValues();return this.whiteDynamicValue},getBlackDynamicValue:function(){this.determineDynamicValues();return this.blackDynamicValue},determineDynamicValues:function(){if(!(0<this.whiteDynamicValue||0<this.blackDynamicValue)){this.blackDynamicValue=this.whiteDynamicValue=0;2<=this.findPiece("b").length&&(this.blackDynamicValue+=10);2<=this.findPiece("B").length&&
(this.whiteDynamicValue+=10);var a=this.getBlacksCoveredSquares();this.blackDynamicValue+=Math.round(a.length/1);a=this.getWhitesCoveredSquares();this.whiteDynamicValue+=Math.round(a.length/1)}},getBestMoveForWhite:function(){return this.getBestMove(!0)},getBestMoveForBlack:function(){return this.getBestMove(!1)},getBestMoveSimple:function(a){for(var b=[],d=1;9>d;d++)for(var c=1;9>c;c++)if(this.board.squares[d][c].hasPiece()&&p.isWhite(this.board.squares[d][c].getPiece())==a){var e=this.getValidMovesForSquare(d,
c);if(0!=e.length)for(var h=0;h<e.length;h++){var k=""+this.board.squares[d][c].name+e[h].name,g=this.evaluateMove(k);if(1E3==Math.abs(g))return k;b.push({move:k,value:g})}}d=function(a,b){return a.value-b.value};a&&(d=function(a,b){return b.value-a.value});b.sort(d);if(this.mark)for(h=0;h<b.length;h++)console.log(b[h].move+": "+b[h].value);return b[0].move},evaluateMove:function(a){var b=this.clone();b.move(a);return b.evaluatePosition()},clone:function(){var a=EngineFactory.create();a.setFEN(this.getPositionFEN());
return a}},r,q;n.getBestMove=function(a){this.lastBestMove="";r=this.lastValue=0;q={};var b=(new Date).getTime();this.alphabeta(3,-1E4,1E4,a);b=((new Date).getTime()-b)/1E3;console.log((a?"white":"black")+" to move ;examined: "+r+" nodes in "+b+"s; best: "+this.lastBestMove+" ("+this.lastValue+")");return this.lastBestMove};n.alphabeta=function(a,b,d,c){r++;var e=this.getPositionFEN(),h;if(0==a){if(q[e])return q[e];h=this.evaluatePosition();return q[e]=h}var k=this.clone(),g,f;if(c){g=this.getValidMovesForWhite();
for(var l=0;l<g.length;l++){k.setFEN(e);k.move(g[l]);f=b;if(k.blackInCheckmate()){b=1E3;this.lastBestMove=g[l];this.lastValue=b;break}else h=k.alphabeta(a-1,b,d,!c),b=Math.max(b,h);f!=b&&(this.lastBestMove=g[l],this.lastValue=h);if(d<=b)break}return b}g=this.getValidMovesForBlack();for(l=0;l<g.length;l++){k.setFEN(e);k.move(g[l]);f=d;if(k.whiteInCheckmate()){d=-1E3;this.lastBestMove=g[l];this.lastValue=d;break}else h=k.alphabeta(a-1,b,d,!c),d=Math.min(d,h);f!=d&&(this.lastBestMove=g[l],this.lastValue=
d);if(d<=b)break}return d};n.evaluatePosition=function(){if(this.whiteInCheckmate())return-1E3;if(this.blackInCheckmate())return 1E3;var a;a=0+this.getWhiteStaticValue();a-=this.getBlackStaticValue();a+=this.getWhiteDynamicValue();return a-=this.getBlackDynamicValue()};EngineFactory=function(){return{create:function(a){"undefined"===typeof a&&(a=BoardFactory.create());return Object.create(n).init(a)}}}()})();
